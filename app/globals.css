@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
    --foreground-rgb: 0, 0, 0;
    --background-start-rgb: 214, 219, 220;
    --background-end-rgb: 255, 255, 255;
}

@media (prefers-color-scheme: dark) {
    :root {
        --foreground-rgb: 255, 255, 255;
        --background-start-rgb: 0, 0, 0;
        --background-end-rgb: 0, 0, 0;
    }
}

@layer utilities {
    .text-balance {
        text-wrap: balance;
    }

    /* Mobile-optimized utilities */
    .touch-manipulation {
        touch-action: manipulation;
    }

    .scrollbar-thin {
        scrollbar-width: thin;
    }

    .scrollbar-thumb-gray-300::-webkit-scrollbar-thumb {
        background-color: rgb(209 213 219);
        border-radius: 9999px;
    }

    .scrollbar-track-transparent::-webkit-scrollbar-track {
        background-color: transparent;
    }

    .scrollbar-thin::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }

    /* Mobile-safe area padding */
    .safe-area-inset {
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
        padding-bottom: env(safe-area-inset-bottom);
    }

    /* Mobile-optimized focus states */
    .focus-visible-mobile:focus-visible {
        outline: 2px solid hsl(var(--ring));
        outline-offset: 2px;
    }

    /* Mobile-optimized button sizes */
    .btn-mobile {
        min-height: 44px;
        min-width: 44px;
    }

    /* Mobile-optimized text sizes */
    .text-mobile-sm {
        font-size: 0.875rem;
        line-height: 1.25rem;
    }

    .text-mobile-base {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    /* Mobile-optimized spacing */
    .space-mobile {
        gap: 0.75rem;
    }

    .space-mobile-sm {
        gap: 0.5rem;
    }
}

@layer base {
    :root {
        --background: 0 0% 100%;
        --foreground: 222 47% 11%;
        --card: 0 0% 100%;
        --card-foreground: 222 47% 11%;
        --popover: 0 0% 100%;
        --popover-foreground: 222 47% 11%;
        /* Distinctive teal accent for primary */
        --primary: 171 77% 36%;
        --primary-foreground: 0 0% 100%;
        --secondary: 210 40% 96%;
        --secondary-foreground: 222 47% 11%;
        --muted: 210 40% 96%;
        --muted-foreground: 215 16% 47%;
        /* Vibrant accent color */
        --accent: 171 77% 95%;
        --accent-foreground: 171 77% 26%;
        --destructive: 0 84% 60%;
        --destructive-foreground: 0 0% 100%;
        --border: 214 32% 91%;
        --input: 214 32% 91%;
        --ring: 171 77% 36%;
        /* Chart colors with teal theme */
        --chart-1: 171 77% 36%;
        --chart-2: 340 75% 55%;
        --chart-3: 45 93% 47%;
        --chart-4: 262 83% 58%;
        --chart-5: 12 76% 61%;
        --radius: 0.625rem;
        /* Success/Warning/Info colors */
        --success: 142 76% 36%;
        --success-foreground: 0 0% 100%;
        --warning: 38 92% 50%;
        --warning-foreground: 0 0% 0%;
        --info: 199 89% 48%;
        --info-foreground: 0 0% 100%;
        /* Sidebar with subtle gradient feel */
        --sidebar-background: 210 40% 98%;
        --sidebar-foreground: 222 47% 11%;
        --sidebar-primary: 171 77% 36%;
        --sidebar-primary-foreground: 0 0% 100%;
        --sidebar-accent: 171 77% 95%;
        --sidebar-accent-foreground: 171 77% 26%;
        --sidebar-border: 214 32% 91%;
        --sidebar-ring: 171 77% 36%;
    }

    .dark {
        --background: 222 47% 5%;
        --foreground: 210 40% 98%;
        --card: 222 47% 7%;
        --card-foreground: 210 40% 98%;
        --popover: 222 47% 7%;
        --popover-foreground: 210 40% 98%;
        /* Teal remains vibrant in dark mode */
        --primary: 171 77% 46%;
        --primary-foreground: 222 47% 5%;
        --secondary: 217 33% 17%;
        --secondary-foreground: 210 40% 98%;
        --muted: 217 33% 17%;
        --muted-foreground: 215 20% 65%;
        --accent: 171 77% 15%;
        --accent-foreground: 171 77% 70%;
        --destructive: 0 63% 31%;
        --destructive-foreground: 210 40% 98%;
        --border: 217 33% 17%;
        --input: 217 33% 17%;
        --ring: 171 77% 46%;
        --chart-1: 171 77% 50%;
        --chart-2: 340 75% 55%;
        --chart-3: 45 93% 47%;
        --chart-4: 262 83% 58%;
        --chart-5: 12 76% 61%;
        --success: 142 76% 46%;
        --success-foreground: 222 47% 5%;
        --warning: 38 92% 50%;
        --warning-foreground: 222 47% 5%;
        --info: 199 89% 48%;
        --info-foreground: 222 47% 5%;
        --sidebar-background: 222 47% 7%;
        --sidebar-foreground: 210 40% 98%;
        --sidebar-primary: 171 77% 46%;
        --sidebar-primary-foreground: 222 47% 5%;
        --sidebar-accent: 171 77% 15%;
        --sidebar-accent-foreground: 171 77% 70%;
        --sidebar-border: 217 33% 17%;
        --sidebar-ring: 171 77% 46%;
    }
}

@layer base {
    * {
        @apply border-border;
    }

    body {
        @apply bg-background text-foreground antialiased;
    }

    /* Smooth transitions for interactive elements */
    button,
    a,
    input,
    select,
    textarea {
        @apply transition-colors duration-200;
    }
}

/* Micro-animations */
@layer utilities {

    /* Fade in animation */
    .animate-fade-in {
        animation: fade-in 0.3s ease-out;
    }

    /* Slide up animation */
    .animate-slide-up {
        animation: slide-up 0.3s ease-out;
    }

    /* Scale in animation */
    .animate-scale-in {
        animation: scale-in 0.2s ease-out;
    }

    /* Staggered children animation */
    .animate-stagger>* {
        opacity: 0;
        animation: fade-slide-up 0.4s ease-out forwards;
    }

    .animate-stagger>*:nth-child(1) {
        animation-delay: 0ms;
    }

    .animate-stagger>*:nth-child(2) {
        animation-delay: 50ms;
    }

    .animate-stagger>*:nth-child(3) {
        animation-delay: 100ms;
    }

    .animate-stagger>*:nth-child(4) {
        animation-delay: 150ms;
    }

    .animate-stagger>*:nth-child(5) {
        animation-delay: 200ms;
    }

    .animate-stagger>*:nth-child(6) {
        animation-delay: 250ms;
    }

    .animate-stagger>*:nth-child(n+7) {
        animation-delay: 300ms;
    }

    /* Hover lift effect */
    .hover-lift {
        @apply transition-all duration-200;
    }

    .hover-lift:hover {
        @apply -translate-y-0.5 shadow-md;
    }

    /* Focus ring animation */
    .focus-ring-animate:focus-visible {
        @apply ring-2 ring-primary ring-offset-2 ring-offset-background;
        animation: ring-pulse 0.5s ease-out;
    }
}

@keyframes fade-in {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes slide-up {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes scale-in {
    from {
        opacity: 0;
        transform: scale(0.95);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes fade-slide-up {
    from {
        opacity: 0;
        transform: translateY(8px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes ring-pulse {

    0%,
    100% {
        box-shadow: 0 0 0 0 hsl(var(--primary) / 0.4);
    }

    50% {
        box-shadow: 0 0 0 4px hsl(var(--primary) / 0.1);
    }
}

.skeleton {
    * {
        pointer-events: none !important;
    }

    *[class^="text-"] {
        color: transparent;
        @apply rounded-md bg-foreground/20 select-none animate-pulse;
    }

    .skeleton-bg {
        @apply bg-foreground/10;
    }

    .skeleton-div {
        @apply bg-foreground/20 animate-pulse;
    }
}

.ProseMirror {
    outline: none;
}

.cm-editor,
.cm-gutters {
    @apply bg-background dark:bg-zinc-800 outline-none selection:bg-zinc-900 !important;
}

.ͼo.cm-focused>.cm-scroller>.cm-selectionLayer .cm-selectionBackground,
.ͼo.cm-selectionBackground,
.ͼo.cm-content::selection {
    @apply bg-zinc-200 dark:bg-zinc-900 !important;
}

.cm-activeLine,
.cm-activeLineGutter {
    @apply bg-transparent !important;
}

.cm-activeLine {
    @apply rounded-r-sm !important;
}

.cm-lineNumbers {
    @apply min-w-7;
}

.cm-foldGutter {
    @apply min-w-3;
}

.cm-lineNumbers .cm-activeLineGutter {
    @apply rounded-l-sm !important;
}

.suggestion-highlight {
    @apply bg-blue-200 hover:bg-blue-300 dark:hover:bg-blue-400/50 dark:text-blue-50 dark:bg-blue-500/40;
}

/* Print styles for Daily Programme */
@media print {

    /* Hide everything by default when printing */
    body * {
        visibility: hidden;
    }

    /* Show only the printable schedule section */
    .print-schedule,
    .print-schedule * {
        visibility: visible;
    }

    /* Show service completion print section */
    .service-completion-print,
    .service-completion-print * {
        visibility: visible;
    }

    /* Position the printable content at the top - use relative positioning for normal flow */
    .print-schedule {
        position: relative;
        width: 100%;
        padding: 0;
        background: white;
        color: #000;
        margin: 0;
        page-break-inside: auto;
    }

    /* Ensure print header and first content appear together on first page */
    .print-header+* {
        page-break-before: avoid;
    }

    /* Ensure all text is black in print */
    .print-schedule * {
        color: #000 !important;
    }

    /* Page setup for better printing */
    @page {
        size: A4;
        margin: 1.5cm;
    }

    /* Repeating header information on each page */
    .print-schedule thead {
        display: table-header-group;
        page-break-inside: avoid;
        break-inside: avoid;
    }

    /* Make date headers repeat when content spans pages */
    .print-date-section {
        page-break-inside: auto;
        break-inside: auto;
    }

    /* Date header should appear at top of page when section breaks */
    .print-date-section>div:first-child {
        page-break-after: avoid;
        break-after: avoid;
    }

    /* Print header styles - compact version, appears at top of first page */
    .print-header {
        display: block !important;
        visibility: visible !important;
        text-align: center;
        margin-bottom: 12px;
        padding-bottom: 8px;
        border-bottom: 2px solid #000;
        page-break-after: avoid;
        break-after: avoid;
        position: relative;
    }

    /* Add repeating header information using CSS - appears on each page via thead */
    /* The main header (MLA name, title) appears only on first page */
    /* Date information repeats via thead in each table */

    /* Show print header even if it has hidden class */
    .print-header.hidden {
        display: block !important;
        visibility: visible !important;
    }

    .print-header h2 {
        font-size: 16px;
        font-weight: 600;
        margin: 0 0 4px 0;
        color: #000 !important;
    }

    .print-header h1 {
        font-size: 20px;
        font-weight: bold;
        margin: 0 0 4px 0;
        color: #000 !important;
    }

    .print-header p {
        font-size: 14px;
        color: #333 !important;
        margin: 0;
    }

    /* Table styles for print */
    .print-schedule table {
        width: 100%;
        border-collapse: collapse;
        page-break-inside: auto;
        table-layout: fixed !important;
    }

    /* Remove overflow scrollbar in print */
    .print-table-wrapper {
        overflow: visible !important;
    }

    /* Allow table rows to break across pages when necessary, but try to keep rows together */
    .print-schedule tbody tr {
        page-break-inside: avoid;
        page-break-after: auto;
        break-inside: avoid;
        break-after: auto;
    }

    /* Header rows should never break - they repeat on each page */
    .print-schedule thead tr {
        page-break-inside: avoid;
        break-inside: avoid;
        page-break-after: avoid;
        break-after: avoid;
    }

    /* Ensure thead stays together with at least one tbody row */
    .print-schedule thead {
        page-break-after: avoid;
        break-after: avoid;
    }

    /* Prevent table cells from breaking, but allow if content is too large */
    .print-schedule th,
    .print-schedule td {
        border: 1px solid #333;
        padding: 8px 10px;
        text-align: left;
        page-break-inside: avoid;
        break-inside: avoid;
        word-wrap: break-word;
        overflow-wrap: break-word;
        hyphens: auto;
    }

    /* Allow cells to break if they contain very long content */
    .print-schedule td {
        page-break-inside: auto;
        break-inside: auto;
    }

    /* Column width definitions using colgroup - most reliable for table-layout: fixed */
    .print-schedule colgroup col.print-col-1 {
        width: 4% !important;
    }

    .print-schedule colgroup col.print-col-2 {
        width: 12% !important;
    }

    .print-schedule colgroup col.print-col-3 {
        width: 52% !important;
    }

    .print-schedule colgroup col.print-col-4 {
        width: 32% !important;
    }

    .print-schedule colgroup col.no-print {
        width: 0 !important;
    }

    /* Serial number column styling for print - narrower - override all width classes */
    /* Target only the column header row (not the date header row) and data cells */
    .print-schedule thead tr:last-child th:first-child,
    .print-schedule tbody td:first-child,
    .print-schedule th.w-\[60px\],
    .print-schedule td.w-\[60px\] {
        text-align: center !important;
        width: 4% !important;
        min-width: 30px !important;
        max-width: 35px !important;
        padding: 8px 3px !important;
    }

    /* Time column width for print - narrower - override all width classes */
    .print-schedule thead tr:last-child th:nth-child(2),
    .print-schedule tbody td:nth-child(2),
    .print-schedule th.w-\[150px\],
    .print-schedule td.w-\[150px\] {
        width: 12% !important;
        min-width: 70px !important;
        max-width: 90px !important;
        padding: 8px 5px !important;
    }

    /* Programme Nature & Place column - wider for print to accommodate content */
    .print-schedule thead tr:last-child th:nth-child(3),
    .print-schedule tbody td:nth-child(3),
    .print-schedule th.w-\[400px\],
    .print-schedule td.w-\[400px\] {
        width: 52% !important;
        min-width: 280px !important;
    }

    /* Ensure consistent font size in Programme Nature & Place column */
    .print-schedule td:nth-child(3)>div>div {
        font-size: inherit !important;
    }

    /* Reference column width for print */
    .print-schedule thead tr:last-child th:nth-child(4),
    .print-schedule tbody td:nth-child(4),
    .print-schedule th.w-\[300px\],
    .print-schedule td.w-\[300px\] {
        width: 32% !important;
        min-width: 150px !important;
    }

    .print-schedule th {
        background-color: #f3f4f6 !important;
        font-weight: 600;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    /* Allow date groups to break across pages when needed, but keep header with first row */
    .print-date-section {
        page-break-inside: auto;
        break-inside: auto;
        margin-bottom: 16px;
        padding-bottom: 8px;
    }

    /* Allow page breaks between date groups */
    .print-date-section:not(:last-child) {
        page-break-after: auto;
        break-after: auto;
    }

    /* Table wrapper - allow breaking but keep header with content */
    .print-table-wrapper {
        page-break-inside: auto;
        break-inside: auto;
        overflow: visible !important;
        width: 100%;
    }

    /* Ensure table headers are visible and styled properly - they will repeat on each page */
    .print-schedule thead {
        display: table-header-group;
        page-break-inside: avoid;
        break-inside: avoid;
    }

    /* Date header row in table - will repeat on each page */
    .print-schedule .print-date-header-row {
        background-color: #f9fafb !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    .print-schedule .print-date-header-row th {
        background-color: #f9fafb !important;
        font-weight: 700;
        font-size: 14px;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    .print-schedule tbody {
        display: table-row-group;
    }

    /* Show the date header outside table when printing */
    .print-date-section>div:first-child {
        display: flex !important;
        margin-bottom: 8px;
        padding-bottom: 4px;
        border-bottom: 1px solid #ddd;
    }

    /* Ensure proper font sizes for print */
    .print-schedule {
        font-size: 12px;
    }

    .print-schedule th {
        font-size: 13px;
    }

    .print-schedule td {
        font-size: 12px;
    }

    /* Better cell padding for print */
    .print-schedule th,
    .print-schedule td {
        padding: 10px 10px;
        vertical-align: top;
    }

    /* Ensure text wraps properly in cells */
    .print-schedule td {
        word-break: break-word;
        overflow-wrap: break-word;
        white-space: normal;
    }

    /* Prevent horizontal overflow */
    .print-schedule {
        overflow: visible !important;
        max-width: 100%;
    }

    /* Ensure table doesn't overflow page width */
    .print-schedule table {
        max-width: 100%;
        table-layout: fixed !important;
        width: 100%;
    }

    /* Hide elements that shouldn't be printed */
    .no-print {
        display: none !important;
        width: 0 !important;
        min-width: 0 !important;
        max-width: 0 !important;
        padding: 0 !important;
        margin: 0 !important;
    }

    /* Ensure hidden columns don't affect table column count */
    .print-schedule table colgroup col.no-print,
    .print-schedule table thead th.no-print,
    .print-schedule table tbody td.no-print {
        display: none !important;
        width: 0 !important;
    }

    /* Project Detail Print Styles */
    .project-print-content {
        display: block !important;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        padding: 20px;
        background: white;
        color: #000;
    }

    .project-print-content * {
        visibility: visible;
        color: #000;
    }

    .project-print-header {
        text-align: center;
        margin-bottom: 24px;
        padding-bottom: 16px;
        border-bottom: 2px solid #000;
    }

    .project-print-header h2 {
        font-size: 18px;
        font-weight: 600;
        margin: 0 0 8px 0;
        color: #000 !important;
    }

    .project-print-header h1 {
        font-size: 24px;
        font-weight: bold;
        margin: 0 0 8px 0;
        color: #000 !important;
    }

    .project-print-header .print-date {
        font-size: 12px;
        color: #333 !important;
        margin: 8px 0 0 0;
    }

    .project-info-section {
        margin-bottom: 24px;
    }

    .project-info-section h3 {
        font-size: 16px;
        font-weight: 700;
        margin: 0 0 12px 0;
        padding-bottom: 8px;
        border-bottom: 1px solid #000;
        color: #000 !important;
    }

    .project-info-table {
        width: auto;
        border-collapse: collapse;
    }

    .project-info-table td {
        padding: 6px 16px 6px 0;
        vertical-align: top;
        color: #000 !important;
    }

    .project-info-table td:first-child {
        white-space: nowrap;
        color: #000 !important;
    }

    .project-info-table strong {
        color: #000 !important;
        font-weight: 600;
    }

    .register-section {
        margin-bottom: 24px;
        page-break-inside: avoid;
    }

    .register-section h3 {
        font-size: 16px;
        font-weight: 700;
        margin: 0 0 12px 0;
        padding-bottom: 8px;
        border-bottom: 1px solid #000;
        color: #000 !important;
    }

    .register-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 11px;
    }

    .register-table th,
    .register-table td {
        border: 1px solid #000;
        padding: 8px 10px;
        text-align: left;
        color: #000;
    }

    .register-table th {
        background-color: #e5e7eb !important;
        font-weight: 700;
        color: #000 !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    .register-table td:first-child {
        text-align: center;
        width: 40px;
    }

    .register-table td {
        background-color: #fff !important;
    }

    .no-entries {
        text-align: center;
        padding: 24px;
        color: #333 !important;
    }

    /* Register print styles */
    .register-print-content {
        display: block !important;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        padding: 20px;
        background: white;
        color: #000;
    }

    .register-print-content * {
        visibility: visible;
        color: #000;
    }

    .register-print-header {
        text-align: center;
        margin-bottom: 24px;
        padding-bottom: 16px;
        border-bottom: 2px solid #000;
    }

    .register-print-header h2 {
        font-size: 18px;
        font-weight: 600;
        margin: 0 0 8px 0;
        color: #000 !important;
    }

    .register-print-header h1 {
        font-size: 24px;
        font-weight: bold;
        margin: 0 0 8px 0;
        color: #000 !important;
    }

    .register-print-header .print-date {
        font-size: 12px;
        color: #333 !important;
        margin: 8px 0 0 0;
    }

    /* Service Completion Print Styles */
    .service-completion-print,
    .service-completion-print * {
        visibility: visible;
    }

    .service-completion-print {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        padding: 20px;
        background: white;
        color: #000;
    }

    .service-completion-print * {
        color: #000 !important;
    }

    .service-completion-print .print-header {
        text-align: center;
        margin-bottom: 24px;
        padding-bottom: 16px;
        border-bottom: 2px solid #000;
    }

    .service-completion-print .print-header h1 {
        font-size: 24px;
        font-weight: bold;
        margin: 0 0 8px 0;
        color: #000 !important;
    }

    .service-completion-print .print-header p {
        font-size: 14px;
        color: #333 !important;
        margin: 0;
    }

    .service-completion-print .token-display {
        text-align: center;
        margin: 24px 0;
        padding: 20px;
        border: 2px solid #000;
        background: #f9fafb;
    }

    .service-completion-print .token-display p {
        font-size: 32px;
        font-weight: bold;
        color: #000 !important;
        margin: 8px 0;
    }

    .service-completion-print .service-summary {
        margin-top: 24px;
    }

    .service-completion-print .service-summary h3 {
        font-size: 18px;
        font-weight: 700;
        margin: 0 0 16px 0;
        padding-bottom: 8px;
        border-bottom: 1px solid #000;
        color: #000 !important;
    }

    .service-completion-print .summary-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
        margin-bottom: 16px;
    }

    .service-completion-print .summary-item {
        padding: 8px 0;
        border-bottom: 1px solid #ddd;
    }

    .service-completion-print .summary-item label {
        font-weight: 600;
        display: block;
        margin-bottom: 4px;
        color: #000 !important;
    }

    .service-completion-print .summary-item p {
        color: #333 !important;
        margin: 0;
    }
}